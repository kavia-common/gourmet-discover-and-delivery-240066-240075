{"is_source_file": true, "format": "Dart", "description": "This file defines the AppState class, managing the application's core state for a Flutter-based food delivery app. It handles user profile, favorite restaurants, cart management, order placement, order tracking, and persistence interactions with local storage.", "external_files": ["package:flutter/foundation.dart", "package:mobile_frontend/data/demo_data.dart", "package:mobile_frontend/models/models.dart", "package:mobile_frontend/services/local_storage_service.dart"], "external_methods": ["DemoData.restaurantById", "DemoData.menuItemById", "LocalStorageService.saveFavoriteRestaurantIds", "LocalStorageService.loadFavoriteRestaurantIds", "LocalStorageService.saveCartItems", "LocalStorageService.loadCartItems", "LocalStorageService.saveOrders", "LocalStorageService.loadOrders", "LocalStorageService.saveProfile", "LocalStorageService.loadProfile"], "published": ["AppState"], "classes": [{"name": "AppState", "description": "A ChangeNotifier that manages the app's state, including user profile, favorite restaurants, cart, and orders. It supports asynchronous initialization and persistence."}], "methods": [{"name": "create", "description": "Factory method to instantiate AppState and load persisted data."}, {"name": "initialized", "description": "Getter indicating whether the AppState has completed initialization."}, {"name": "favoriteRestaurantIds", "description": "Getter for the set of favorite restaurant IDs."}, {"name": "isFavorite", "description": "Checks if a restaurant ID is marked as favorite."}, {"name": "cartRestaurantId", "description": "Getter for current cart's restaurant ID."}, {"name": "cartItems", "description": "Unmodifiable list of current cart items."}, {"name": "orders", "description": "Unmodifiable list of current orders."}, {"name": "profile", "description": "Getter for user profile data."}, {"name": "restaurantById", "description": "Returns a Restaurant object by its ID using demo data."}, {"name": "menuItemById", "description": "Returns a MenuItem object by its ID using demo data."}, {"name": "cartItemCount", "description": "Calculates total quantity of items in the cart."}, {"name": "cartSubtotal", "description": "Calculates total price of cart items before fees and taxes."}, {"name": "cartDeliveryFee", "description": "Returns delivery fee for the current cart's restaurant."}, {"name": "cartTaxes", "description": "Calculates taxes based on subtotal."}, {"name": "cartTotal", "description": "Calculates total order cost including subtotal, delivery fee, and taxes."}, {"name": "toggleFavoriteRestaurant", "description": "Adds or removes a restaurant from favorites, updating persistence."}, {"name": "clearCart", "description": "Empties the shopping cart and updates storage."}, {"name": "addToCart", "description": "Adds a menu item to the cart, resetting cart if restaurant differs."}, {"name": "updateCartItemQuantity", "description": "Changes the quantity of a cart item or removes it if quantity <= 0."}, {"name": "placeOrder", "description": "Creates an order from current cart, persists it, and clears the cart."}, {"name": "advanceOrderTracking", "description": "Advances the tracking status of an order (demo)."}, {"name": "updateProfile", "description": "Updates user profile and saves to storage."}, {"name": "_loadFromStorage", "description": "Private method to load state data from local storage."}, {"name": "_persistCart", "description": "Private method to save current cart to storage."}, {"name": "_persistOrders", "description": "Private method to save current orders to storage."}], "calls": ["DemoData.restaurantById", "DemoData.menuItemById", "notifyListeners", "await _storage.saveFavoriteRestaurantIds", "await _storage.saveCartItems", "await _storage.saveOrders", "await _storage.saveProfile", "await _storage.loadFavoriteRestaurantIds", "await _storage.loadCartItems", "await _storage.loadOrders", "await _storage.loadProfile"], "search-terms": ["AppState", "cart management", "order handling", "local storage", "favorite restaurants", "profile update", "Flutter ChangeNotifier"], "state": 2, "file_id": 24, "knowledge_revision": 62, "git_revision": "", "hash": "a9d0f52611c56ad1859e8c41a2c1e580", "format-version": 4, "code-base-name": "mobile_frontend", "filename": "mobile_frontend/lib/state/app_state.dart", "revision_history": [{"62": ""}]}